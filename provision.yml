---
 - name: Provision vm from template
   become: false
   hosts: localhost
   gather_facts: true
   tasks: 

    - name: Create a virtual machine from a template
      community.vmware.vmware_guest:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        folder: "{{ folder }}"
        name: "{{ vm_name }}"
        state: poweredon
        template: node1
        # hardware:
        #   memory_gb: "{{ mem_gb }}"
        #   num_cpus: "{{ num_cpu }}"
        #   scsi: paravirtual
        # disk:
        # - size_gb: "{{ disk_gb }}"
        #   type: thin
        #   datastore: WorkloadDatastore
      register: deploy_vm
      delegate_to: localhost

    - name: Show vm details
      debug:
        msg: "{{ deploy_vm }}"
      
